# ЗВІТ ДО ЗАВДАННЯ 1

# Застосування алгоритму максимального потоку для логістики товарів

## ВСТУП

У цьому звіті представлено результати моделювання мережі потоків для логістики товарів від терміналів до магазинів через мережу складів. Використано алгоритм Едмондса-Карпа для знаходження максимального потоку в мережі.

---

## 1. ОПИС МЕРЕЖІ

### Структура мережі

- **Термінали**: 2 (джерела товарів)
- **Склади**: 4 (проміжні вузли)
- **Магазини**: 14 (кінцеві споживачі)
- **Загальна кількість вершин**: 20

### Зв'язки та пропускні здатності

#### Від терміналів до складів:

| Від        | До      | Пропускна здатність |
| ---------- | ------- | ------------------- |
| Термінал 1 | Склад 1 | 25 одиниць          |
| Термінал 1 | Склад 2 | 20 одиниць          |
| Термінал 1 | Склад 3 | 15 одиниць          |
| Термінал 2 | Склад 2 | 10 одиниць          |
| Термінал 2 | Склад 3 | 15 одиниць          |
| Термінал 2 | Склад 4 | 30 одиниць          |

#### Від складів до магазинів:

| Від     | До         | Пропускна здатність |
| ------- | ---------- | ------------------- |
| Склад 1 | Магазин 1  | 15 одиниць          |
| Склад 1 | Магазин 2  | 10 одиниць          |
| Склад 1 | Магазин 3  | 20 одиниць          |
| Склад 2 | Магазин 4  | 15 одиниць          |
| Склад 2 | Магазин 5  | 10 одиниць          |
| Склад 2 | Магазин 6  | 25 одиниць          |
| Склад 3 | Магазин 7  | 20 одиниць          |
| Склад 3 | Магазин 8  | 15 одиниць          |
| Склад 3 | Магазин 9  | 10 одиниць          |
| Склад 4 | Магазин 10 | 20 одиниць          |
| Склад 4 | Магазин 11 | 10 одиниць          |
| Склад 4 | Магазин 12 | 15 одиниць          |
| Склад 4 | Магазин 13 | 5 одиниць           |
| Склад 4 | Магазин 14 | 10 одиниць          |

---

## 2. АЛГОРИТМ ЕДМОНДСА-КАРПА

### Опис алгоритму

Алгоритм Едмондса-Карпа є реалізацією методу Форда-Фалкерсона з використанням пошуку в ширину (BFS) для знаходження доповнюючих шляхів.

### Основні кроки:

1. Створення залишкової мережі (residual graph)
2. Пошук доповнюючого шляху від джерела до стоку за допомогою BFS
3. Знаходження мінімальної пропускної здатності на знайденому шляху
4. Оновлення залишкових здатностей ребер
5. Повторення кроків 2-4 до тих пір, поки існують доповнюючі шляхи

### Складність алгоритму:

- **Часова складність**: O(V × E²), де V - кількість вершин, E - кількість ребер
- **Просторова складність**: O(V + E)

---

## 3. РЕЗУЛЬТАТИ ОБЧИСЛЕНЬ

### Максимальний потік

**Загальний максимальний потік у мережі: 115 одиниць**

### Потоки від терміналів до складів

| Від        | До      | Фактичний потік | Ємність | Використання |
| ---------- | ------- | --------------- | ------- | ------------ |
| Термінал 1 | Склад 1 | 25              | 25      | 100%         |
| Термінал 1 | Склад 2 | 20              | 20      | 100%         |
| Термінал 1 | Склад 3 | 15              | 15      | 100%         |
| Термінал 2 | Склад 2 | 10              | 10      | 100%         |
| Термінал 2 | Склад 3 | 15              | 15      | 100%         |
| Термінал 2 | Склад 4 | 30              | 30      | 100%         |

**Висновок**: Усі з'єднання від терміналів до складів використовуються на 100%, що вказує на повне завантаження цих маршрутів.

### Потоки від складів до магазинів

| Від     | До         | Фактичний потік | Ємність | Використання |
| ------- | ---------- | --------------- | ------- | ------------ |
| Склад 1 | Магазин 1  | 15              | 15      | 100%         |
| Склад 1 | Магазин 2  | 10              | 10      | 100%         |
| Склад 1 | Магазин 3  | 0               | 20      | 0%           |
| Склад 2 | Магазин 4  | 15              | 15      | 100%         |
| Склад 2 | Магазин 5  | 10              | 10      | 100%         |
| Склад 2 | Магазин 6  | 5               | 25      | 20%          |
| Склад 3 | Магазин 7  | 20              | 20      | 100%         |
| Склад 3 | Магазин 8  | 10              | 15      | 67%          |
| Склад 3 | Магазин 9  | 0               | 10      | 0%           |
| Склад 4 | Магазин 10 | 20              | 20      | 100%         |
| Склад 4 | Магазин 11 | 10              | 10      | 100%         |
| Склад 4 | Магазин 12 | 0               | 15      | 0%           |
| Склад 4 | Магазин 13 | 0               | 5       | 0%           |
| Склад 4 | Магазин 14 | 0               | 10      | 0%           |

### Таблиця потоків між терміналами та магазинами

| Термінал   | Магазин    | Фактичний потік |
| ---------- | ---------- | --------------- |
| Термінал 1 | Магазин 1  | 15              |
| Термінал 1 | Магазин 2  | 10              |
| Термінал 1 | Магазин 4  | 10              |
| Термінал 1 | Магазин 5  | 6               |
| Термінал 1 | Магазин 6  | 3               |
| Термінал 1 | Магазин 7  | 10              |
| Термінал 1 | Магазин 8  | 5               |
| Термінал 2 | Магазин 4  | 5               |
| Термінал 2 | Магазин 5  | 3               |
| Термінал 2 | Магазин 6  | 1               |
| Термінал 2 | Магазин 7  | 10              |
| Термінал 2 | Магазин 8  | 5               |
| Термінал 2 | Магазин 10 | 20              |
| Термінал 2 | Магазин 11 | 10              |

---

## 4. АНАЛІЗ РЕЗУЛЬТАТІВ

### Питання 1: Які термінали забезпечують найбільший потік товарів до магазинів?

**Відповідь:**

- **Термінал 1**: 60 одиниць
- **Термінал 2**: 55 одиниць

**Термінал 1 забезпечує найбільший потік** (60 одиниць), що становить 52% від загального потоку.

**Пояснення**:
Термінал 1 має загальну пропускну здатність 60 одиниць (25+20+15) до складів, тоді як Термінал 2 має 55 одиниць (10+15+30). Обидва термінали використовують свою максимальну потужність на 100%, але Термінал 1 має трохи більшу загальну ємність з'єднань.

---

### Питання 2: Які маршрути мають найменшу пропускну здатність і як це впливає на загальний потік?

**Відповідь:**

**Маршрути з найменшою пропускною здатністю (вузькі місця):**

1. Склад 4 → Магазин 13: 5 одиниць (0% використання)
2. Термінал 2 → Склад 2: 10 одиниць (100% використання) ⚠️
3. Склад 1 → Магазин 2: 10 одиниць (100% використання) ⚠️
4. Склад 2 → Магазин 5: 10 одиниць (100% використання) ⚠️
5. Склад 4 → Магазин 11: 10 одиниць (100% використання) ⚠️
6. Склад 3 → Магазин 9: 10 одиниць (0% використання)

**Виявлено 13 повністю завантажених маршрутів (вузьких місць):**

- Термінал 1 → Склад 1 (25 од.)
- Термінал 1 → Склад 2 (20 од.)
- Термінал 1 → Склад 3 (15 од.)
- Термінал 2 → Склад 2 (10 од.)
- Термінал 2 → Склад 3 (15 од.)
- Термінал 2 → Склад 4 (30 од.)
- Склад 1 → Магазин 1 (15 од.)
- Склад 1 → Магазин 2 (10 од.)
- Склад 2 → Магазин 4 (15 од.)
- Склад 2 → Магазин 5 (10 од.)
- Склад 3 → Магазин 7 (20 од.)
- Склад 4 → Магазин 10 (20 од.)
- Склад 4 → Магазин 11 (10 од.)

**Вплив на загальний потік:**
Повністю завантажені маршрути є обмежуючими факторами для збільшення загального потоку. Для підвищення ефективності мережі необхідно:

1. Збільшити пропускну здатність вузьких місць
2. Створити альтернативні маршрути постачання
3. Перерозподілити потоки через менш завантажені з'єднання

---

### Питання 3: Які магазини отримали найменше товарів і чи можна збільшити їх постачання?

**Відповідь:**

**Магазини з найменшим постачанням (0 одиниць):**

1. **Магазин 3** (0 од.) - Можливість збільшення: +20 од. через Склад 1
2. **Магазин 9** (0 од.) - Можливість збільшення: +10 од. через Склад 3
3. **Магазин 12** (0 од.) - Можливість збільшення: +15 од. через Склад 4
4. **Магазин 13** (0 од.) - Можливість збільшення: +5 од. через Склад 4
5. **Магазин 14** (0 од.) - Можливість збільшення: +10 од. через Склад 4

**Пояснення:**
Ці магазини не отримують товарів через те, що:

- Склад 1 використав весь доступний потік (25 од.) для постачання Магазинів 1 і 2
- Склад 3 використав свою ємність для Магазинів 7 і 8
- Склад 4 використав свою ємність для Магазинів 10 і 11

**Можливості збільшення постачання:**
Якщо збільшити пропускну здатність з'єднань від терміналів до складів, з'явиться можливість постачання в ці магазини. Зокрема:

- Збільшення ємності Термінал 1 → Склад 1 дозволить постачати в Магазин 3
- Збільшення ємності Термінал 1/2 → Склад 3 дозволить постачати в Магазин 9
- Збільшення ємності Термінал 2 → Склад 4 дозволить постачати в Магазини 12-14

---

### Питання 4: Чи є вузькі місця, які можна усунути для покращення ефективності логістичної мережі?

**Відповідь: Так, виявлено критичні вузькі місця.**

**Критичні вузькі місця (100% завантаження):**

1. **На рівні "Термінали → Склади":**

   - Усі 6 з'єднань завантажені на 100%
   - Це означає, що термінали працюють на межі своїх можливостей

2. **На рівні "Склади → Магазини":**
   - 7 з 14 з'єднань завантажені на 100%
   - 5 магазинів не отримують товарів взагалі
   - 2 з'єднання використовуються частково

**Рекомендації щодо усунення вузьких місць:**

1. **Короткострокові рішення:**

   - Перерозподілити потоки через менш завантажені маршрути
   - Використовувати недозавантажені з'єднання (Склад 1 → Магазин 3, Склад 2 → Магазин 6)
   - Оптимізувати завантаження Складу 3 (використано 67% ємності до Магазину 8)

2. **Довгострокові рішення:**

   - Збільшити пропускну здатність Термінал 2 → Склад 2 (з 10 до 20 од.)
   - Розширити ємність Склад 1 → Магазин 2 (з 10 до 15 од.)
   - Додати альтернативні маршрути від Терміналів до Складів
   - Розглянути можливість додавання додаткового складу

3. **Стратегічні рекомендації:**
   - Термінал 1 потребує розширення пропускної здатності до Складів 1-3
   - Склад 4 має найбільший потенціал для розширення (обслуговує лише 2 з 5 підключених магазинів)
   - Створити резервні маршрути для критичних з'єднань

**Потенціал покращення:**
Якщо усунути всі вузькі місця, максимальний потік може збільшитися до **155 одиниць** (сума всіх пропускних здатностей від складів до магазинів).

---

## 5. ВИСНОВКИ

1. **Досягнутий результат**: Мережа функціонує з максимальним потоком 115 одиниць, що становить 74% від теоретичного максимуму.

2. **Ефективність терміналів**: Термінал 1 забезпечує 52% потоку, Термінал 2 - 48%. Обидва працюють на повну потужність.

3. **Обмежуючі фактори**: Головні обмеження знаходяться на рівні з'єднань "Термінали → Склади", де всі маршрути завантажені на 100%.

4. **Потенціал оптимізації**: Існує можливість збільшення загального потоку на 35% шляхом:

   - Розширення пропускних здатностей терміналів
   - Оптимізації розподілу товарів через склади
   - Використання недозавантажених маршрутів

5. **Критичні точки**: 5 магазинів (36% від загальної кількості) не отримують товарів через недостатню пропускну здатність попередніх ланок.

6. **Алгоритм Едмондса-Карпа**: Показав свою ефективність для знаходження максимального потоку в мережі такого масштабу.

---

## 6. ТЕХНІЧНА РЕАЛІЗАЦІЯ

### Використані структури даних:

- `defaultdict` для представлення графа
- `deque` для реалізації черги в BFS
- `dict` для зберігання батьківських вершин і потоків

### Основні класи та методи:

- `MaxFlowNetwork` - клас для роботи з мережею
- `add_edge()` - додавання ребер до графа
- `bfs()` - пошук в ширину
- `edmonds_karp()` - основний алгоритм
- `calculate_terminal_to_store_flows()` - обчислення фінальних потоків

### Особливості реалізації:

- Автоматичне створення зворотних ребер для залишкової мережі
- Підтримка супер-джерела та супер-стоку
- Детальне логування всіх потоків
- Аналіз використання пропускних здатностей

---

## 7. СПИСОК ЛІТЕРАТУРИ

1. Edmonds, J., & Karp, R. M. (1972). Theoretical improvements in algorithmic efficiency for network flow problems.
2. Cormen, T. H., Leiserson, C. E., Rivest, R. L., & Stein, C. (2009). Introduction to Algorithms (3rd ed.). MIT Press.
3. Ford, L. R., & Fulkerson, D. R. (1956). Maximal flow through a network. Canadian Journal of Mathematics, 8, 399-404.

---

**Дата створення звіту**: 22.10.2025

**Palamarchuk Serhii**  
GoIT Neoversity - Design and Analysis of Algorithms  
Модуль: "Просунуті структури для оптимізації та пошуку"
